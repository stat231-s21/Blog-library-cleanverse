---
title: "COVID-19 Vaccinations in the United States: A Study"
author: "Amaya Smole, Clara Page, Kriti Verma"
date: "5/11/2021"
output:
  rmdformats::readthedown:
    thumbnails: false
    highlight: NULL
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.align="center")
library(tidyverse)
```

# Project Description

## Introduction

### Results

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For example, you can include **Bold** and _Italic_ and `Code` text.  For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

You should test out updating your GitHub Pages website:

- clone your group's blog project repo in RStudio
- update "Your Project Title Here" to a new title in the YAML header
- knit `index.Rmd` 
- commit and push BOTH the `index.Rmd` and the `index.html` files
- go to https://stat231-s21.github.io/Blog-library-cleanverse/ to see the published test document (this is publicly available!)

## Including code and plots

You can embed code as normal, for example:

```{r cars}
summary(cars)
```

Let's clean up the format of that output:

```{r pretty, echo=FALSE, warning=FALSE, message=FALSE}
#library(kableExtra)
summary(cars) %>%
  kable(col.names = c("Speed", "Distance")
        , row.names = F) %>%
  kable_styling(bootstrap_options = "striped"
                , full_width = F) %>%
  row_spec(0, bold = T, underline = T) %>%
  column_spec(1:2, width = "1.5in") 
```

In a study from the 1920s, fifty cars were used to see how the speed of the car and the distance taken to stop were related.  Speeds ranged between `r min(cars$speed)` and `r max(cars$speed)` mph.  Distances taken to stop ranged between `r min(cars$dist)` and `r max(cars$dist)` feet, with the middle 50% falling between `r as.numeric(quantile(cars$dist)[2])` and `r as.numeric(quantile(cars$dist)[4])` feet.  

You can also embed plots as normal, for example:

```{r figure1, echo=FALSE}
ggplot(data = cars, aes(x = speed, y = dist)) + 
  geom_point() + 
  labs(x = "Speed of car (mph)"
       , y = "Distance taken to stop (ft)"
       , title = "cars data (1920s)")
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.


## Including links and images

You can include [Links](https://www.datadreaming.org/post/r-markdown-theme-gallery/) and images ![team logo](https://raw.githubusercontent.com/stat231-s21/Blog-library-cleanverse/main/images/s1g6-publichealth.png?token=AGMTX5XTR6OSIG2YBI4FWT3AOVTZU)

You can embed a gif.  

![ma example](https://raw.githubusercontent.com/stat231-s21/Blog-library-cleanverse/main/kriti/ma_example.gif)

![usa vaccine number](https://raw.githubusercontent.com/stat231-s21/Blog-library-cleanverse/main/kriti/usa_vaccine_number.gif)

# Comparison: CA and TN {.tabset .tabset-fade .tabset-pills}

```{r}
# read in and plot ca vax over time
library(tidyverse)
library(dplyr)
library(readxl)
library(scales)
library(viridis)
ca_time <- read_csv("/Users/smolea/git/Blog-library-cleanverse/amaya/ca_time.csv") %>%
  filter(race != "Unknown", race != "Other/Multiracial")
ca_tg <- ggplot(ca_time, aes(x = date, y = frac, colour = race)) +
  geom_line() +
  labs(colour = "Race", title = "Proportion of Racial Groups Vaccinated Over Time", 
       subtitle = "California, 2021") +
  xlab("Date") + ylab("Proportion of Racial Group")
ca_tg
# read in and plot tn vax over time 
tn_time <- read_csv("/Users/smolea/git/Blog-library-cleanverse/amaya/tn_time.csv") %>%
  filter(race != "UNKNOWN", race != "OTHER/MULTIRACIAL")
tn_tg <- ggplot(tn_time, aes(x = date, y = frac, colour = race)) +
  geom_line() +
  labs(colour = "Race", title = "Proportion of Racial Groups Vaccinated Over Time", 
       subtitle = "Tennessee, 2021") +
  xlab("Date") + ylab("Proportion of Racial Group")
tn_tg



# read in and plot ca county vaccinations
ca_county <- read_csv("/Users/smolea/git/Blog-library-cleanverse/amaya/ca_county.csv") %>%
  mutate(subregion = tolower(county)) %>%
  select(-county)
ca_counties <- map_data(map = "county", region = "california")
ca_map <- ca_counties %>%
  left_join(ca_county, by = "subregion")
ggplot(ca_map, aes(x = long, y = lat, group = group, fill = total_vax)) +
  geom_polygon(colour = "white") +
  theme_void() +
  coord_fixed(ratio = 1.3) +
  facet_wrap(~administered_date) +
  labs(fill = "Total Vaccinations") +
  scale_fill_viridis(direction = -1) +
  ggtitle("Vaccinations in California, Spring 2021")

# read in and plot tn county vaccinations
options(scipen = 999)
tn_county <- read_csv("/Users/smolea/git/Blog-library-cleanverse/amaya/tn_county.csv") %>%
  mutate(subregion = tolower(COUNTY)) %>%
  select(-COUNTY)
tn_counties <- map_data(map = "county", region = "tennessee")
tn_map <- tn_counties %>%
  left_join(tn_county, by = "subregion") %>%
  na.omit()
ggplot(tn_map, aes(x = long, y = lat, group = group, fill = total_vax)) +
  geom_polygon(colour = "white") +
  theme_void() +
  coord_fixed(ratio = 1.3) +
  facet_wrap(~date) +
  labs(fill = "Total Vaccinations") +
  scale_fill_viridisdirection(direction = -1) +
  ggtitle("Vaccinations in Tennessee, Spring 2021")
```

## Bulleted list

You can make a bulleted list like this:

- item 1
- item 2
- item 3


## Numbered list

You can make a numbered list like this

1. First thing I want to say
2. Second thing I want to say
3. Third thing I want to say

# Politics and Vaccinations {.tabset .tabset-fade .tabset-pills}

# Tracking Statewide Vaccinations {.tabset .tabset-fade .tabset-pills}

